// @flow

import React, { Component } from "react"

import { Map, SVGOverlay, TileLayer } from "./components"

const center = [7.894532454655228, 98.35295134899502]
const rectangle = [
      [7.896050847504184, 98.35042685119629],
      [7.895240847504183, 98.35213685119629]
]
const rectangle2 = [
      [7.896050847504184, 98.35249685119629],
      [7.895240847504183, 98.35420685119629]
]

export default class SVGOverlayExample extends Component<{}> {
      timer = null

      state = {
            mode: "0",
            change: [
                  { x: 0, y: 0 },
                  { x: 0, y: 1 },
                  { x: 0, y: 2 },
                  { x: 0, y: 3 },
                  { x: 0, y: 4 },
                  { x: 0, y: 5 },
                  { x: 0, y: 6 },
                  { x: 0, y: 7 },
                  { x: 0, y: 8 },
                  { x: 0, y: 9 },
                  { x: 0, y: 10 },
                  { x: 0, y: 11 },
                  { x: 0, y: 12 },
                  { x: 0, y: 13 },
                  { x: 0, y: 14 },
                  { x: 0, y: 15 },
                  { x: 0, y: 16 },
                  { x: 0, y: 17 },
                  { x: 0, y: 18 },
                  { x: 0, y: 19 },
                  { x: 1, y: 19 },
                  { x: 1, y: 18 },
                  { x: 1, y: 17 },
                  { x: 1, y: 16 },
                  { x: 2, y: 17 },
                  { x: 2, y: 18 },
                  { x: 2, y: 19 },
                  { x: 1, y: 14 },
                  { x: 1, y: 15 },
                  { x: 2, y: 16 },
                  { x: 2, y: 15 },
                  { x: 1, y: 13 },
                  { x: 2, y: 14 },
                  { x: 1, y: 8 },
                  { x: 1, y: 9 },
                  { x: 1, y: 10 },
                  { x: 1, y: 11 },
                  { x: 1, y: 12 },
                  { x: 2, y: 13 },
                  { x: 2, y: 12 },
                  { x: 2, y: 11 },
                  { x: 2, y: 10 },
                  { x: 2, y: 9 },
                  { x: 1, y: 7 },
                  { x: 2, y: 8 },
                  { x: 3, y: 9 },
                  { x: 3, y: 10 },
                  { x: 4, y: 10 },
                  { x: 4, y: 11 },
                  { x: 4, y: 12 },
                  { x: 3, y: 12 },
                  { x: 3, y: 13 },
                  { x: 3, y: 14 },
                  { x: 3, y: 15 },
                  { x: 3, y: 16 },
                  { x: 3, y: 17 },
                  { x: 3, y: 18 },
                  { x: 3, y: 19 },
                  { x: 4, y: 19 },
                  { x: 4, y: 15 },
                  { x: 4, y: 16 },
                  { x: 4, y: 17 },
                  { x: 4, y: 18 },
                  { x: 4, y: 14 },
                  { x: 4, y: 13 },
                  { x: 3, y: 11 },
                  { x: 1, y: 6 },
                  { x: 2, y: 6 },
                  { x: 3, y: 6 },
                  { x: 3, y: 7 },
                  { x: 2, y: 7 },
                  { x: 3, y: 8 },
                  { x: 4, y: 9 },
                  { x: 4, y: 8 },
                  { x: 4, y: 7 },
                  { x: 1, y: 5 },
                  { x: 2, y: 5 },
                  { x: 3, y: 5 },
                  { x: 4, y: 5 },
                  { x: 5, y: 5 },
                  { x: 6, y: 5 },
                  { x: 6, y: 6 },
                  { x: 5, y: 6 },
                  { x: 4, y: 6 },
                  { x: 5, y: 7 },
                  { x: 6, y: 7 },
                  { x: 6, y: 8 },
                  { x: 5, y: 8 },
                  { x: 5, y: 9 },
                  { x: 5, y: 10 },
                  { x: 5, y: 11 },
                  { x: 5, y: 12 },
                  { x: 5, y: 13 },
                  { x: 5, y: 14 },
                  { x: 5, y: 15 },
                  { x: 5, y: 16 },
                  { x: 5, y: 17 },
                  { x: 5, y: 18 },
                  { x: 5, y: 19 },
                  { x: 6, y: 19 },
                  { x: 6, y: 18 },
                  { x: 6, y: 17 },
                  { x: 7, y: 18 },
                  { x: 7, y: 19 },
                  { x: 6, y: 16 },
                  { x: 7, y: 16 },
                  { x: 7, y: 17 },
                  { x: 6, y: 15 },
                  { x: 6, y: 13 },
                  { x: 6, y: 14 },
                  { x: 6, y: 9 },
                  { x: 6, y: 10 },
                  { x: 6, y: 11 },
                  { x: 6, y: 12 },
                  { x: 7, y: 9 },
                  { x: 7, y: 10 },
                  { x: 7, y: 11 },
                  { x: 7, y: 12 },
                  { x: 7, y: 13 },
                  { x: 7, y: 14 },
                  { x: 7, y: 15 },
                  { x: 8, y: 16 },
                  { x: 9, y: 16 },
                  { x: 9, y: 17 },
                  { x: 9, y: 18 },
                  { x: 9, y: 19 },
                  { x: 8, y: 19 },
                  { x: 8, y: 17 },
                  { x: 8, y: 18 },
                  { x: 7, y: 6 },
                  { x: 7, y: 7 },
                  { x: 8, y: 8 },
                  { x: 9, y: 8 },
                  { x: 9, y: 9 },
                  { x: 8, y: 9 },
                  { x: 8, y: 7 },
                  { x: 1, y: 4 },
                  { x: 2, y: 4 },
                  { x: 3, y: 4 },
                  { x: 4, y: 4 },
                  { x: 5, y: 4 },
                  { x: 6, y: 4 },
                  { x: 7, y: 5 },
                  { x: 8, y: 6 },
                  { x: 9, y: 7 },
                  { x: 1, y: 3 },
                  { x: 2, y: 3 },
                  { x: 3, y: 3 },
                  { x: 4, y: 3 },
                  { x: 5, y: 3 },
                  { x: 6, y: 3 },
                  { x: 7, y: 4 },
                  { x: 8, y: 5 },
                  { x: 9, y: 6 },
                  { x: 1, y: 2 },
                  { x: 2, y: 2 },
                  { x: 3, y: 2 },
                  { x: 4, y: 2 },
                  { x: 5, y: 2 },
                  { x: 6, y: 2 },
                  { x: 7, y: 3 },
                  { x: 8, y: 4 },
                  { x: 9, y: 5 },
                  { x: 1, y: 1 },
                  { x: 2, y: 1 },
                  { x: 3, y: 1 },
                  { x: 4, y: 1 },
                  { x: 5, y: 1 },
                  { x: 6, y: 1 },
                  { x: 7, y: 2 },
                  { x: 8, y: 3 },
                  { x: 9, y: 4 }
            ],
            change2: [
                  { x: 0, y: 0 },
                  { x: 0, y: 1 }
            ],
            screen: [
                  [
                        51.2,
                        49,
                        46.6,
                        44.1,
                        41.6,
                        39.5,
                        38.2,
                        37,
                        35.7,
                        34.8,
                        33.5,
                        32.6,
                        31.9,
                        31.2,
                        30.4,
                        30.1,
                        29.7,
                        29.3,
                        29.2,
                        29.1
                  ],
                  [
                        51.8,
                        49.4,
                        47.1,
                        44.7,
                        42.4,
                        40.1,
                        38.8,
                        37.8,
                        36.7,
                        35.8,
                        34.9,
                        33.6,
                        32.8,
                        31.9,
                        31.1,
                        30.5,
                        30.1,
                        29.5,
                        29.3,
                        29.2
                  ],
                  [
                        51.3,
                        48.8,
                        46.3,
                        44.1,
                        42,
                        39.8,
                        38.8,
                        37.9,
                        37.1,
                        36.3,
                        35.5,
                        34.3,
                        33.3,
                        32.3,
                        31.3,
                        30.7,
                        30.4,
                        30,
                        29.7,
                        29.5
                  ],
                  [
                        50.7,
                        48.1,
                        45.5,
                        43.5,
                        41.5,
                        39.6,
                        38.7,
                        38.1,
                        37.5,
                        36.8,
                        36.8,
                        36,
                        34.9,
                        33.8,
                        32.7,
                        31.6,
                        30.9,
                        30.6,
                        30.6,
                        30.3
                  ],
                  [
                        50.5,
                        47.8,
                        45.1,
                        43.2,
                        41.4,
                        39.5,
                        38.8,
                        38.3,
                        37.8,
                        37.3,
                        36.7,
                        35.8,
                        34.9,
                        34,
                        33,
                        32.3,
                        31.7,
                        31.2,
                        30.8,
                        30.4
                  ],
                  [
                        50.2,
                        47.4,
                        44.8,
                        43,
                        41.2,
                        39.4,
                        38.9,
                        38.9,
                        38.6,
                        38.4,
                        38.1,
                        37.8,
                        37.4,
                        36.7,
                        36,
                        35.3,
                        34.5,
                        33.7,
                        32.8,
                        32.1
                  ],
                  [
                        50.1,
                        47.3,
                        44.6,
                        42.9,
                        41.1,
                        39.3,
                        38.9,
                        38.8,
                        38.7,
                        38.6,
                        38.5,
                        38.3,
                        37.9,
                        37.4,
                        36.8,
                        36,
                        34.9,
                        33.9,
                        33,
                        32.5
                  ],
                  [
                        51.1,
                        48.3,
                        45.6,
                        43.6,
                        41.6,
                        39.6,
                        39.2,
                        39,
                        39.8,
                        38.7,
                        38.7,
                        38.7,
                        38.4,
                        38,
                        37.6,
                        36.9,
                        34.9,
                        34.1,
                        33.6,
                        33.1
                  ],
                  [
                        52.1,
                        49.3,
                        46.3,
                        44.3,
                        42.1,
                        40,
                        39.4,
                        39.1,
                        38.9,
                        38.8,
                        39,
                        39.2,
                        39,
                        38.7,
                        38.4,
                        37.8,
                        36.9,
                        36.9,
                        36,
                        35.2
                  ],
                  [
                        53.1,
                        50.3,
                        47.4,
                        45.1,
                        42.7,
                        40.3,
                        39.6,
                        39.2,
                        38.9,
                        38.9,
                        39.2,
                        39.6,
                        39.5,
                        38.6,
                        37.9,
                        37.1,
                        36.4,
                        35.9,
                        35.5,
                        34.5
                  ]
            ],
            screenOriginal: [
                  [
                        51.2,
                        49,
                        46.6,
                        44.1,
                        41.6,
                        39.5,
                        38.2,
                        37,
                        35.7,
                        34.8,
                        33.5,
                        32.6,
                        31.9,
                        31.2,
                        30.4,
                        30.1,
                        29.7,
                        29.3,
                        29.2,
                        29.1
                  ],
                  [
                        51.8,
                        49.4,
                        47.1,
                        44.7,
                        42.4,
                        40.1,
                        38.8,
                        37.8,
                        36.7,
                        35.8,
                        34.9,
                        33.6,
                        32.8,
                        31.9,
                        31.1,
                        30.5,
                        30.1,
                        29.5,
                        29.3,
                        29.2
                  ],
                  [
                        51.3,
                        48.8,
                        46.3,
                        44.1,
                        42,
                        39.8,
                        38.8,
                        37.9,
                        37.1,
                        36.3,
                        35.5,
                        34.3,
                        33.3,
                        32.3,
                        31.3,
                        30.7,
                        30.4,
                        30,
                        29.7,
                        29.5
                  ],
                  [
                        50.7,
                        48.1,
                        45.5,
                        43.5,
                        41.5,
                        39.6,
                        38.7,
                        38.1,
                        37.5,
                        36.8,
                        36.8,
                        36,
                        34.9,
                        33.8,
                        32.7,
                        31.6,
                        30.9,
                        30.6,
                        30.6,
                        30.3
                  ],
                  [
                        50.5,
                        47.8,
                        45.1,
                        43.2,
                        41.4,
                        39.5,
                        38.8,
                        38.3,
                        37.8,
                        37.3,
                        36.7,
                        35.8,
                        34.9,
                        34,
                        33,
                        32.3,
                        31.7,
                        31.2,
                        30.8,
                        30.4
                  ],
                  [
                        50.2,
                        47.4,
                        44.8,
                        43,
                        41.2,
                        39.4,
                        38.9,
                        38.9,
                        38.6,
                        38.4,
                        38.1,
                        37.8,
                        37.4,
                        36.7,
                        36,
                        35.3,
                        34.5,
                        33.7,
                        32.8,
                        32.1
                  ],
                  [
                        50.1,
                        47.3,
                        44.6,
                        42.9,
                        41.1,
                        39.3,
                        38.9,
                        38.8,
                        38.7,
                        38.6,
                        38.5,
                        38.3,
                        37.9,
                        37.4,
                        36.8,
                        36,
                        34.9,
                        33.9,
                        33,
                        32.5
                  ],
                  [
                        51.1,
                        48.3,
                        45.6,
                        43.6,
                        41.6,
                        39.6,
                        39.2,
                        39,
                        39.8,
                        38.7,
                        38.7,
                        38.7,
                        38.4,
                        38,
                        37.6,
                        36.9,
                        34.9,
                        34.1,
                        33.6,
                        33.1
                  ],
                  [
                        52.1,
                        49.3,
                        46.3,
                        44.3,
                        42.1,
                        40,
                        39.4,
                        39.1,
                        38.9,
                        38.8,
                        39,
                        39.2,
                        39,
                        38.7,
                        38.4,
                        37.8,
                        36.9,
                        36.9,
                        36,
                        35.2
                  ],
                  [
                        53.1,
                        50.3,
                        47.4,
                        45.1,
                        42.7,
                        40.3,
                        39.6,
                        39.2,
                        38.9,
                        38.9,
                        39.2,
                        39.6,
                        39.5,
                        38.6,
                        37.9,
                        37.1,
                        36.4,
                        35.9,
                        35.5,
                        34.5
                  ]
            ],
            screen2: [
                  [
                        29.0,
                        29.0,
                        29.1,
                        29.1,
                        29.2,
                        29.5,
                        29.7,
                        30.0,
                        30.5,
                        30.8,
                        31.2,
                        31.8,
                        32.8,
                        33.1,
                        33.5,
                        33.8,
                        35.6,
                        35.7,
                        36.6,
                        36.6
                  ],
                  [
                        29.2,
                        29.3,
                        29.4,
                        29.5,
                        29.6,
                        29.8,
                        30.1,
                        30.3,
                        30.6,
                        31.1,
                        31.4,
                        31.8,
                        32.4,
                        32.9,
                        33.4,
                        33.6,
                        33.7,
                        33.9,
                        34.5,
                        35.4
                  ],
                  [
                        29.4,
                        29.5,
                        29.7,
                        29.9,
                        30.1,
                        30.4,
                        30.7,
                        31,
                        31.2,
                        31.7,
                        32.0,
                        32.5,
                        33.9,
                        34,
                        34,
                        34.1,
                        34.5,
                        35.1,
                        35,
                        35.7
                  ],
                  [
                        29.6,
                        29.8,
                        30.0,
                        30.3,
                        30.6,
                        30.6,
                        30.9,
                        31.3,
                        31.6,
                        31.9,
                        32.3,
                        32.6,
                        33.1,
                        33.6,
                        34.1,
                        34.5,
                        34.4,
                        34.3,
                        34.2,
                        34.4
                  ],
                  [
                        30.1,
                        30.3,
                        30.6,
                        31.0,
                        31.4,
                        31.8,
                        32.1,
                        32.4,
                        32.7,
                        33.7,
                        33.2,
                        33.5,
                        33.9,
                        34.3,
                        34.7,
                        35,
                        34.9,
                        34.8,
                        35.0,
                        34.9
                  ],
                  [
                        31.1,
                        31.2,
                        31.7,
                        32.1,
                        32.6,
                        33,
                        33.4,
                        33.7,
                        34.1,
                        34.5,
                        34.8,
                        35.1,
                        35.3,
                        35.5,
                        35.6,
                        35.6,
                        35.6,
                        35.5,
                        35.5,
                        35.6
                  ],
                  [
                        31.7,
                        31.9,
                        32.9,
                        33.4,
                        33.9,
                        34.2,
                        34.6,
                        34.9,
                        35.4,
                        35.7,
                        35.9,
                        35.9,
                        36.0,
                        36.1,
                        36.1,
                        36.0,
                        36.0,
                        36.0,
                        36.1,
                        36.1
                  ],
                  [
                        32.6,
                        32.6,
                        33.0,
                        33.5,
                        34.0,
                        34.4,
                        34.7,
                        35.0,
                        35.3,
                        35.7,
                        36,
                        36.2,
                        36.4,
                        36.5,
                        36.6,
                        36.5,
                        36.5,
                        36.4,
                        36.4,
                        36.5
                  ],
                  [
                        33.5,
                        33.4,
                        33.7,
                        34.2,
                        34.6,
                        35.0,
                        35.2,
                        35.4,
                        35.6,
                        36.6,
                        36.0,
                        36.3,
                        36.5,
                        36.8,
                        36.9,
                        37.1,
                        37.4,
                        37.3,
                        37.4,
                        37.4
                  ],
                  [
                        34.4,
                        34.2,
                        34.4,
                        34.8,
                        35.2,
                        35.5,
                        35.6,
                        35.8,
                        36.0,
                        36.4,
                        36.4,
                        36.6,
                        36.9,
                        37.2,
                        37.5,
                        37.7,
                        37.5,
                        37.3,
                        37.1,
                        37.3
                  ]
            ],
            screen2Original: [
                  [
                        29.0,
                        29.0,
                        29.1,
                        29.1,
                        29.2,
                        29.5,
                        29.7,
                        30.0,
                        30.5,
                        30.8,
                        31.2,
                        31.8,
                        32.8,
                        33.1,
                        33.5,
                        33.8,
                        35.6,
                        35.7,
                        36.6,
                        36.6
                  ],
                  [
                        29.2,
                        29.3,
                        29.4,
                        29.5,
                        29.6,
                        29.8,
                        30.1,
                        30.3,
                        30.6,
                        31.1,
                        31.4,
                        31.8,
                        32.4,
                        32.9,
                        33.4,
                        33.6,
                        33.7,
                        33.9,
                        34.5,
                        35.4
                  ],
                  [
                        29.4,
                        29.5,
                        29.7,
                        29.9,
                        30.1,
                        30.4,
                        30.7,
                        31,
                        31.2,
                        31.7,
                        32.0,
                        32.5,
                        33.9,
                        34,
                        34,
                        34.1,
                        34.5,
                        35.1,
                        35,
                        35.7
                  ],
                  [
                        29.6,
                        29.8,
                        30.0,
                        30.3,
                        30.6,
                        30.6,
                        30.9,
                        31.3,
                        31.6,
                        31.9,
                        32.3,
                        32.6,
                        33.1,
                        33.6,
                        34.1,
                        34.5,
                        34.4,
                        34.3,
                        34.2,
                        34.4
                  ],
                  [
                        30.1,
                        30.3,
                        30.6,
                        31.0,
                        31.4,
                        31.8,
                        32.1,
                        32.4,
                        32.7,
                        33.7,
                        33.2,
                        33.5,
                        33.9,
                        34.3,
                        34.7,
                        35,
                        34.9,
                        34.8,
                        35.0,
                        34.9
                  ],
                  [
                        31.1,
                        31.2,
                        31.7,
                        32.1,
                        32.6,
                        33,
                        33.4,
                        33.7,
                        34.1,
                        34.5,
                        34.8,
                        35.1,
                        35.3,
                        35.5,
                        35.6,
                        35.6,
                        35.6,
                        35.5,
                        35.5,
                        35.6
                  ],
                  [
                        31.7,
                        31.9,
                        32.9,
                        33.4,
                        33.9,
                        34.2,
                        34.6,
                        34.9,
                        35.4,
                        35.7,
                        35.9,
                        35.9,
                        36.0,
                        36.1,
                        36.1,
                        36.0,
                        36.0,
                        36.0,
                        36.1,
                        36.1
                  ],
                  [
                        32.6,
                        32.6,
                        33.0,
                        33.5,
                        34.0,
                        34.4,
                        34.7,
                        35.0,
                        35.3,
                        35.7,
                        36,
                        36.2,
                        36.4,
                        36.5,
                        36.6,
                        36.5,
                        36.5,
                        36.4,
                        36.4,
                        36.5
                  ],
                  [
                        33.5,
                        33.4,
                        33.7,
                        34.2,
                        34.6,
                        35.0,
                        35.2,
                        35.4,
                        35.6,
                        36.6,
                        36.0,
                        36.3,
                        36.5,
                        36.8,
                        36.9,
                        37.1,
                        37.4,
                        37.3,
                        37.4,
                        37.4
                  ],
                  [
                        34.4,
                        34.2,
                        34.4,
                        34.8,
                        35.2,
                        35.5,
                        35.6,
                        35.8,
                        36.0,
                        36.4,
                        36.4,
                        36.6,
                        36.9,
                        37.2,
                        37.5,
                        37.7,
                        37.5,
                        37.3,
                        37.1,
                        37.3
                  ]
            ]
      }

      componentDidUpdate = (prepProps, prevState) => {
            if (prevState.mode !== this.state.mode) {
                  clearTimeout(this.timer)
                  if (prevState.mode === "1") {
                        this.setState({ screen: this.state.screenOriginal })
                  } else if (prevState.mode === "2") {
                        this.setState({ screen2: this.state.screen2Original })
                  }
            }
      }

      handleClick = e => {
            if (
                  e.latlng.lat <= 7.896050847504184 &&
                  e.latlng.lat >= 7.895240847504183 &&
                  e.latlng.lng >= 98.35042685119629 &&
                  e.latlng.lng <= 98.35213685119629
            ) {
                  if (this.state.mode !== "1") {
                        this.setState({ mode: "1" })
                  } else {
                        this.setState({
                              mode: "0"
                        })
                  }
            } else if (
                  e.latlng.lat <= 7.896050847504184 &&
                  e.latlng.lat >= 7.895240847504183 &&
                  e.latlng.lng >= 98.35249685119629 &&
                  e.latlng.lng <= 98.35420685119629
            ) {
                  if (this.state.mode !== "2") {
                        this.setState({ mode: "2" })
                  } else {
                        this.setState({
                              mode: "0"
                        })
                  }
            }
      }

      mapChange = async pos => {
            if (pos === 0) {
                  clearTimeout(this.timer)
            }
            if (this.state.mode === "1") {
                  if (pos < this.state.change.length) {
                        await this.setState({
                              screen: this.state.screen.map((arr, index) => {
                                    return arr.map((subarr, index2) => {
                                          if (
                                                this.state.change[pos].x ===
                                                      index &&
                                                this.state.change[pos].y ===
                                                      index2
                                          ) {
                                                return "->"
                                          }

                                          return subarr
                                    })
                              })
                        })
                        this.timer = setTimeout(() => {
                              this.mapChange(pos + 1)
                        }, 1000)
                  }
            } else if (this.state.mode === "2") {
                  if (pos < this.state.change2.length) {
                        await this.setState({
                              screen2: this.state.screen2.map((arr, index) => {
                                    return arr.map((subarr, index2) => {
                                          if (
                                                this.state.change2[pos].x ===
                                                      index &&
                                                this.state.change2[pos].y ===
                                                      index2
                                          ) {
                                                return "->"
                                          }

                                          return subarr
                                    })
                              })
                        })
                        setTimeout(() => {
                              this.mapChange(pos + 1)
                        }, 1000)
                  }
            }
      }

      render() {
            return (
                  <>
                        <Map
                              center={center}
                              zoom={20}
                              onClick={this.handleClick}
                        >
                              <TileLayer
                                    attribution='&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                                    url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                              />
                              {this.state.mode === "1" ? (
                                    <SVGOverlay bounds={rectangle}>
                                          <rect
                                                x="0"
                                                y="0"
                                                width="100%"
                                                height="100%"
                                                fill="white"
                                          />
                                          {this.state.screen.map(
                                                (arr, indexx) => {
                                                      return (
                                                            <>
                                                                  {arr.map(
                                                                        (
                                                                              subarr,
                                                                              indexy
                                                                        ) => {
                                                                              return (
                                                                                    <text
                                                                                          fontSize="7"
                                                                                          x={`${indexy *
                                                                                                5}%`}
                                                                                          y={`${(indexx +
                                                                                                1) *
                                                                                                10}%`}
                                                                                    >
                                                                                          {subarr.toLocaleString(
                                                                                                undefined,
                                                                                                {
                                                                                                      minimumFractionDigits: 1
                                                                                                }
                                                                                          )}
                                                                                    </text>
                                                                              )
                                                                        }
                                                                  )}
                                                            </>
                                                      )
                                                }
                                          )}
                                    </SVGOverlay>
                              ) : null}
                              {this.state.mode === "2" ? (
                                    <SVGOverlay bounds={rectangle2}>
                                          <rect
                                                x="0"
                                                y="0"
                                                width="100%"
                                                height="100%"
                                                fill="white"
                                          />
                                          {this.state.screen2.map(
                                                (arr, indexx) => {
                                                      return (
                                                            <>
                                                                  {arr.map(
                                                                        (
                                                                              subarr,
                                                                              indexy
                                                                        ) => {
                                                                              return (
                                                                                    <text
                                                                                          fontSize="7"
                                                                                          x={`${indexy *
                                                                                                5}%`}
                                                                                          y={`${(indexx +
                                                                                                1) *
                                                                                                10}%`}
                                                                                    >
                                                                                          {subarr.toLocaleString(
                                                                                                undefined,
                                                                                                {
                                                                                                      minimumFractionDigits: 1
                                                                                                }
                                                                                          )}
                                                                                    </text>
                                                                              )
                                                                        }
                                                                  )}
                                                            </>
                                                      )
                                                }
                                          )}
                                    </SVGOverlay>
                              ) : null}
                        </Map>
                        <button
                              onClick={() => {
                                    this.mapChange(0)
                              }}
                        >
                              test
                        </button>
                  </>
            )
      }
}
